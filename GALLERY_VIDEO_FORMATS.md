# ギャラリー対応動画フォーマット

## 🎬 **対応フォーマット**

### ✅ **完全対応**
| フォーマット | 拡張子 | MIMEタイプ | ブラウザ対応 | 推奨用途 |
|------------|--------|------------|-------------|----------|
| **MP4** | `.mp4` | `video/mp4` | 全ブラウザ ✅ | 一般的な動画 |
| **WebM** | `.webm` | `video/webm` | Chrome/Firefox ✅ | Web最適化動画 |
| **MOV** | `.mov` | `video/quicktime` | Safari ✅ | Apple/高品質動画 |

### 🔄 **自動フォールバック**
ブラウザが最適フォーマットを自動選択：
1. **WebM** (最優先 - 軽量・高品質)
2. **MP4** (標準 - 高互換性)  
3. **MOV** (フォールバック - Apple最適化)

## 📁 **ファイル配置方法**

### **動画の追加:**
```
public/gallery/videos/episodes/
├── episode-1.webm    ✅ WebM (推奨)
├── episode-1.mp4     ✅ MP4 (標準)
├── episode-1.mov     ✅ MOV (Apple)
└── episode-2.mp4     ✅ 単一フォーマットでもOK
```

### **データファイル更新:**
```json
{
  "id": "video_004",
  "title": "新しい動画",
  "filename": "episodes/video.mp4",  // ✅ メインファイル
  "date": "2025-02-15",
  "category": "episode",
  "showInMovieGallery": true,
  "year": "2025"
}
```

## 🔧 **技術仕様**

### **HTML5 Video要素:**
```html
<video>
  <source src="video.webm" type="video/webm" />    <!-- 最優先 -->
  <source src="video.mp4" type="video/mp4" />      <!-- 標準 -->
  <source src="video.mov" type="video/quicktime" /> <!-- フォールバック -->
</video>
```

### **自動フォーマット検出:**
- ファイル拡張子から適切なMIMEタイプを自動設定
- ブラウザサポートを動的チェック
- 未対応フォーマットは警告表示

## 📱 **ブラウザ対応詳細**

### **デスクトップ:**
| ブラウザ | MP4 | WebM | MOV |
|---------|-----|------|-----|
| **Chrome** | ✅ | ✅ | 🟡 |
| **Firefox** | ✅ | ✅ | ❌ |
| **Safari** | ✅ | ❌ | ✅ |
| **Edge** | ✅ | ✅ | 🟡 |

### **モバイル:**
| プラットフォーム | MP4 | WebM | MOV |
|----------------|-----|------|-----|
| **iOS Safari** | ✅ | ❌ | ✅ |
| **Android Chrome** | ✅ | ✅ | 🟡 |
| **Android Firefox** | ✅ | ✅ | ❌ |

## 🎯 **推奨設定**

### **エンコーディング設定:**

#### **MP4 (H.264):**
```
- コーデック: H.264 (AVC)
- ビットレート: 2-5 Mbps (1080p)
- オーディオ: AAC 128kbps
- 互換性: 最高
```

#### **WebM (VP9):**
```
- コーデック: VP9
- ビットレート: 1-3 Mbps (1080p)
- オーディオ: Opus 96kbps  
- サイズ: MP4より30%小さい
```

#### **MOV (H.264):**
```
- コーデック: H.264
- 品質: 高品質設定
- 用途: Apple機器での撮影
```

### **ファイルサイズ目安:**
- **1分動画**: 10-50MB
- **5分動画**: 50-250MB  
- **10分動画**: 100-500MB

## ⚠️ **注意事項**

1. **ファイルサイズ**: 100MB以下推奨
2. **解像度**: 1080p以下推奨  
3. **コーデック**: 古いコーデック避ける
4. **パフォーマンス**: 複数フォーマットは容量増加

## 🚀 **最適化のコツ**

### **シングルフォーマット戦略:**
- **一般用途**: MP4のみ（互換性重視）
- **Web配信**: WebMのみ（軽量重視）
- **Apple環境**: MOVのみ（品質重視）

### **マルチフォーマット戦略:**
- **重要動画**: WebM + MP4 （最適化＋互換性）
- **アーカイブ**: MP4 + MOV （標準＋高品質）

この設定により、あらゆるデバイス・ブラウザで最適な動画体験を提供できます！